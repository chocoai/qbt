<!DOCTYPE html>
<html lang="en" ng-app="app">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="/assets/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="/assets/admin/css/sb-admin-2.css" rel="stylesheet">
    <link href="/assets/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="/assets/bootstrap-datetimepicker/css/bootstrap-datetimepicker.min.css" rel="stylesheet" type="text/css">
    <link href="{{{/css/main.min.css}}}" rel="stylesheet" type="text/css">
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body ng-controller="orderDetailCtrl">
<div class="container containerWidthAuto">
    <ul class="nav nav-tabs" id="myTab">
        <li class="active"><a href="#detail" data-toggle="tab">订单详情</a></li>
        <li><a href="#timeline" data-toggle="tab">时间轴</a></li>
    </ul>
    <div class="tab-content">
        <div class="tab-pane fade in active" id="detail">
            <div class="row">
                <div class="col-sm-8">
                    <div class="panel panel-default" style="margin-top:10px;">
                        <div class="panel-heading">
                            <h3 class="panel-title">订单信息</h3>
                        </div>
                        <div class="panel-body">
                            <p>下单客户: {{order.userName}}</p>
                            <p>订单来源: {{order.orderSource | commFilter : 'order_source'}}</p>
                            <p>取包类型: {{order.expressType | commFilter : 'business_type'}}
                                <button ng-click="showDeliverTimes()" class="btn btn-primary btn-xs">修改</button>
                            </p>
                            <p>订单号: {{order.number}}</p>
                            <p>留言:
                                <label class="label label-info">{{order.remark}}</label>
                            </p>
                        </div>
                    </div>
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h3 class="panel-title">状态</h3>
                        </div>
                        <div class="panel-body">
                            <p>订单状态: {{order.orderStatus | commFilter : 'order_type'}}</p>
                            <p>物流状态: {{order.deliveryStatus | commFilter : 'sf_type'}}</p>
                            <p>BSP状态: {{order.bpsStatus | commFilter : 'bps_type'}}</p>
                            <p>退款状态: {{order.refundStatus | commFilter : 'refund_type'}}</p>
                        </div>
                    </div>
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h3 class="panel-title">运单<i class="fa fa-fw fa-edit pull-right"
                                                         ng-click="editMailNo()"></i></h3>
                        </div>
                        <div class="panel-body">
                            <p>运单号: {{order.mailNo}}</p>
                        </div>
                    </div>
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h3 class="panel-title">渠道<i class="fa fa-fw fa-edit pull-right"
                                                         ng-click="editChannelNo()"></i></h3>
                        </div>
                        <div class="panel-body">
                            <p>
                                渠道：{{order.mailChannel===1?'顺丰':(order.mailChannel===2?'德邦':(order.mailChannel===3?'跨越':'宅急送'))}}</p>
                            <p>运单号：{{order.mailChannel!==1 ? order.mailNumber : ''}}</p>
                        </div>
                    </div>
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h3 class="panel-title">时间<i class="fa fa-fw fa-edit pull-right" ng-click="editTime()"></i>
                            </h3>
                        </div>
                        <div class="panel-body">
                            <p>预计到达: {{order.deliverDate}}(预计{{arriveDay}}天后送达)</p>
                            <p>下单时间: {{order.createTime | date : 'yyyy-MM-dd HH:mm:ss'}}</p>
                            <!--<p>开球时间：{{order.playTime | date : 'yyyy-MM-dd HH:mm:ss'}}</p>-->
                        </div>
                    </div>
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h3 class="panel-title">取包信息<i class="fa fa-refresh marginLeft10 pointer"
                                                           ng-click="changeData()"></i><i
                                    class="fa fa-fw fa-edit pull-right" ng-click="editAddr(1)"></i></h3>
                        </div>
                        <div class="panel-body">
                            <p ng-if="order.jAddrType == 4">详细地址: {{order.jTreePath}}{{order.jAddress}}</p>
                            <p ng-if="order.jAddrType != 4">详细地址:
                                {{order.jAddrName}}({{order.jTreePath}}{{order.jAddress}})</p>
                            <p>联系人: {{order.jContact}}</p>
                            <p>联系电话: {{order.jMobile}}</p>
                            <p ng-if="order.orgName!==''">{{order.orgName}}</p>
                        </div>
                    </div>
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h3 class="panel-title">送包信息<i class="fa fa-refresh marginLeft10 pointer"
                                                           ng-click="changeData()"></i><i
                                    class="fa fa-fw fa-edit pull-right" ng-click="editAddr(2)"></i></h3>
                        </div>
                        <div class="panel-body">
                            <p ng-if="order.dAddrType == 4">详细地址: {{order.dTreePath}}{{order.dAddress}}</p>
                            <p ng-if="order.dAddrType != 4">详细地址:
                                {{order.dAddrName}}({{order.dTreePath}}{{order.dAddress}})</p>
                            <p>联系人: {{order.dContact}}</p>
                            <p>联系电话: {{order.dMobile}}</p>
                        </div>
                    </div>
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h3 class="panel-title">支付信息</h3>
                        </div>
                        <div class="panel-body">
                            <p>微信订单号: {{order.uuid}}</p>
                            <p ng-show="order.proxyUserId">代下单人: {{order.saleUserName}}</p>
                            <p ng-show="order.proxyUserId">订单支付人:
                                <span ng-show="order.isProxyPay !== null">{{order.isProxyPay ? '代下单人支付' : '用户支付'}}</span>
                                <span ng-show="order.isProxyPay === null">未支付</span>
                            </p>
                            <p>支付方式: {{order.payMethod | commFilter : 'payMethod_type'}}{{(order.payMethod == 1 &&
                                order.orderSource
                                == 3) ? '（官网下单）' : ''}}</p>
                            <p>订单金额: {{order.totalAmount -(order.jOutRangePrice + order.dOutRangePrice) | currency :
                                '￥'}}</p>
                            <p ng-show="order.urgentFee > 0">
                                加急费：{{(order.urgentFee | currency : '￥')}}</p>
                            <p ng-show="(order.jOutRangePrice + order.dOutRangePrice) > 0">
                                偏远费：{{(order.jOutRangePrice + order.dOutRangePrice | currency : '￥')}}</p>
                            <p>优惠金额: {{order.discount | currency : '￥'}}</p>
                            <p ng-show="!!order.favorableDesc">优惠描述: {{order.favorableDesc}}</p>
                            <p>手动优惠: {{order.inputDiscount | currency : '￥'}}</p>
                            <p>实付金额: {{order.amount | currency : '￥'}}</p>
                            <p>取消费用: {{order.cancelFee | currency : '￥'}}</p>
                            <p ng-show="order.orderStatus == 3" class="form-inline">
                <span
                        class="marginRight5">客服是否收款: {{order.kfReceivableStatus | commFilter : 'kfReceivableStatus_type'}}</span>
                                <input type="text" maxlength="50" ng-model="weixinPayCode"
                                       onkeyup="keyUpTwoDecimal(this)" placeholder="请输入微信支付码" class="form-control"
                                       style="min-width: 150px;"
                                       ng-show="((order.kfReceivableStatus == 2 && order.payMethod == 97)||(order.kfReceivableStatus == 2 && order.payMethod == 98 && order.thirdId == 3)) && order.weixinPayCode==null">
                                <span ng-show="order.orderStatus == 3 && order.weixinPayCode!==null">{{order.weixinPayCode}}&nbsp;&nbsp;&nbsp;</span>
                                <span ng-show="order.orderStatus == 3 && order.weixinPayCode!==null">{{order.weixinPayCodeOperater}}&nbsp;&nbsp;&nbsp;</span>
                                <span ng-show="order.orderStatus == 3 && order.weixinPayCode!==null">{{order.weixinPayCodeUpdateTime | date : 'yyyy-MM-dd HH:mm'}}</span>
                                <button ng-click="layerChangeKFReceivableStatus()"
                                        ng-show="order.kfReceivableStatus == 2 && order.payMethod == 97"
                                        class="btn btn-primary btn-sm">
                                    确认收款
                                </button>
                                <button ng-click="layerChangeKFReceivableStatus()"
                                        ng-show="order.kfReceivableStatus == 2 && order.payMethod == 98 && order.thirdId == 3"
                                        class="btn btn-primary btn-sm">确认收款
                                </button>
                                <!--<button ng-click="submitWechatCode()" class="btn btn-primary btn-sm" ng-show="(order.kfReceivableStatus == 2 && order.payMethod == 97)||(order.kfReceivableStatus == 2 && order.payMethod == 98 && order.thirdId == 3)">提交</button>-->
                            </p>
                            <p ng-show="order.orderStatus == 3">
                                <span class="marginRight5">财务是否收款: {{order.cwReceivableStatus == 1 ? '是' : '否'}}</span>
                                <button ng-click="layerChangeCWReceivableStatus()"
                                        ng-show="order.cwReceivableStatus == 2 && order.payMethod == 97"
                                        class="btn btn-primary btn-sm">
                                    确认收款
                                </button>
                                <button ng-click="layerChangeCWReceivableStatus()"
                                        ng-show="order.cwReceivableStatus == 2 && order.payMethod == 98 && order.thirdId == 3"
                                        class="btn btn-primary btn-sm">确认收款
                                </button>
                            </p>
                        </div>
                    </div>
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h3 class="panel-title">保价信息</h3>
                        </div>
                        <div class="panel-body">
                            <p>保价金额:{{order.insuredValue | currency : '￥'}}万</p>
                            <p>保价费:{{order.insuredFee | currency : '￥'}}</p>
                            <p>保价渠道：{{order.insuredChannel=='sf'?"顺丰":"华安"}}</p>
                        </div>
                    </div>
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h3 class="panel-title">费用增减</h3>
                        </div>
                        <div class="panel-body">
                            <div class="row">
                                <div class="col-sm-12 mb8">
                                    <div class="form-inline pull-right">
                                        <div class="form-group" style="position:relative">
                                            <select ng-model="costItemSelect" class="form-control" style="width:180px">
                                                <option value="特别优惠">特别优惠</option>
                                                <option value="理赔">理赔</option>
                                                <option value="补偿">补偿</option>
                                                <option value="转运费">转运费</option>
                                            </select>
                                            <input ng-model="costItem" type="text" class="form-control" maxlength="8"
                                                   style="width:160px;position:absolute;left:0;top:0;"
                                                   placeholder="输入费用增减项目">
                                        </div>
                                        <div class="form-group">
                                            <input ng-model="costAmount" class="form-control" type="number"
                                                   placeholder="输入金额">
                                            <input ng-model="costRemark" class="form-control" type="text" maxlength="50"
                                                   placeholder="输入备注">
                                            <button ng-click="addCostItem()" class="btn btn-primary">添加</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-12">
                                    <table class="table table-condensed table-hover table-bordered">
                                        <thead>
                                        <th>日期</th>
                                        <th>增减项目</th>
                                        <th>金额</th>
                                        <th>备注</th>
                                        <th>操作</th>
                                        </thead>
                                        <tbody>
                                        <tr ng-repeat="item in costes track by $index">
                                            <td>{{item.createTime | date : 'yyyy-MM-dd HH:mm:ss'}}</td>
                                            <td>{{item.item}}</td>
                                            <td>
                                                <span ng-show="item.amount >= 0">{{item.amount | currency : '￥'}}</span>
                                                <span ng-show="item.amount < 0">
                                                        -{{(item.amount)-(2*item.amount) | currency : '￥'}}
                                                    </span>

                                            </td>
                                            <td>{{item.remark}}</td>
                                            <td>
                                                <button ng-click="deleteCostItem(item.id)"
                                                        class="btn btn-danger btn-sm">删除
                                                </button>
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div ng-show="order.thirdType!=1" class="panel panel-default">
                        <div class="panel-heading">
                            <h3 class="panel-title">合作方信息</h3>
                        </div>
                        <div class="panel-body">
                            <p>合作方名称: {{order.thirdName}}</p>
                            <p>结算状态: {{order.settleState | commFilter : 'settleState_type'}}</p>
                        </div>
                    </div>
                    <div ng-show="order.isVip" class="panel panel-default">
                        <div class="panel-heading">
                            <h3 class="panel-title">会员信息</h3>
                        </div>
                        <div class="panel-body">
                            <p>会员卡号: {{order.vipNo}}</p>
                        </div>
                    </div>
                    <div ng-show="order.payMethod == 97" class="panel panel-default">
                        <div class="panel-heading">
                            <h3 class="panel-title">客户打球原因</h3>
                        </div>
                        <div class="panel-body">
                            <p>{{order.reason}}</p>
                        </div>
                    </div>
                </div>
                <div class="col-sm-4">
                    <div class="panel panel-default" style="margin-top:10px;" ng-show="deliverTimes.length>0">
                        <div class="panel-heading">
                            <h3 class="panel-title">取包类型</h3>
                        </div>
                        <div class="panel-body">
                            <div ng-repeat="item in deliverTimes track by $index" class="mb8">
                                <input ng-checked="!$index" type="radio" name="deliverRadio" id="deliverRadio"
                                       value="{{item.business_type}}" ng-click="checkBusiness(item)">{{item.business_type
                                | commFilter :
                                'business_type'}}，预计{{item.deliver_time.split(',')[1].substr(5)}}到达，￥{{item.sf_price}}
                            </div>
                        </div>
                    </div>
                    <!-- <div class="btn btn-primary btn-block" style="margin-top:10px;" ng-click="save(1)">订单修改保存</div> -->
                    <div class="btn btn-info btn-block" ng-click="save(2)">重新下发顺丰BSP</div>
                    <div class="btn btn-info btn-block" ng-click="save(3)">纸质订单路由注册</div>
                    <div class="btn btn-info btn-block" ng-click="orderpush()">订单重新推送</div>
                    <div class="btn btn-info btn-block" ng-click="layerRecvie()">确认已取件（快递员已取件）</div>
                    <div class="btn btn-info btn-block" ng-click="updateSFNoticeStatus()">{{sf_notice_string}}</div>
                    <div style="margin-top:60px" class="btn btn-danger btn-block" ng-click="isTipCancel()">订单取消</div>

                    <div class="panel panel-default rowMarginTop" style="padding-bottom:10px;">
                        <div class="panel-heading">
                            <h3 class="panel-title">客服记录</h3>
                        </div>
                        <div ng-repeat="kfRecord in kfRecords track by $index" style="padding:10px 15px 0px 15px">
                            <div class="row">
                                <div class="col-sm-5">
                                    <p>{{kfRecord.accountName}}</p>
                                </div>
                                <div class="col-sm-7 text-right">
                                    <p>{{kfRecord.createTime | date : 'yyyy-MM-dd HH:mm:ss'}}</p>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-12">
                  <span class="form-control" style="height: auto;">
                     <pre>{{kfRecord.memo}}</pre>
                  </span>
                                </div>
                            </div>
                        </div>
                        <div style="padding:10px 15px 0px 15px">
                            <div class="input-group">
                                <input ng-model="recordMemo" type="text" placeholder="" class="form-control"
                                       maxlength="200">
                                <span class="input-group-btn">
                  <button ng-click="addKFRecord()" type="button" class="btn btn-danger btn-flat">Note</button>
                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
        <div class="tab-pane fade" id="timeline">
            <div class="row">
                <div class="col-sm-6">
                    <div class="panel panel-default mt10">
                        <div class="panel-heading">
                            <h3 class="panel-title">订单状态</h3>
                        </div>
                        <div class="panel-body">
                            <ul class="timeline">
                                <div ng-repeat="item in optList track by $index">
                                    <li class="time-label"><span>{{item.createTime | date:'yyyy-MM-dd HH:mm:ss'}}</span>
                                    </li>
                                    <li>
                                        <i class="fa fa-envelope bg-blue"></i>
                                        <div class="timeline-item">
                                            <span class="time"><i class="fa fa-clock-o"></i>{{item.createTime | date:'HH:mm:ss'}}</span>
                                            <h3 class="timeline-header">{{item.operatorName}}</h3>
                                            <div class="timeline-body">{{item.action}}<br/>
                                                <div ng-bind-html="item.description.replaceAll('\n','<br/><br/>') | to_trusted">
                                                </div>
                                            </div>
                                        </div>
                                    </li>
                                </div>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="panel panel-default mt10">
                        <div class="panel-heading">
                            <h3 class="panel-title">球包信息</h3>
                        </div>
                        <div class="panel-body">
                            <ul class="timeline">
                                <div ng-repeat="item in wayList track by $index">
                                    <li class="time-label"><span>{{item.acceptTime | date:'yyyy-MM-dd HH:mm:ss'}}</span>
                                    </li>
                                    <li>
                                        <i class="fa fa-envelope bg-blue"></i>
                                        <div class="timeline-item">
                                            <span class="time"><i class="fa fa-clock-o"></i>{{item.acceptTime | date:'HH:mm:ss'}}</span>
                                            <h3 class="timeline-header">{{item.acceptAddress}}</h3>
                                            <div class="timeline-body">
                                                {{item.remark.replaceAll('快件','球包').replaceAll('派件','送包').replaceAll('收件','收包')}}
                                            </div>
                                        </div>
                                    </li>
                                </div>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="editStatus" style="display:none;margin:15px;">
            <form class="form-horizontal">
                <div class="form-group">
                    <label class="col-sm-3 control-label">订单状态</label>
                    <div class="col-sm-9">
                        <select class="form-control" ng-model="edit.orderStatus">
                            <option value="{{item.type}}" ng-repeat="item in order_type">{{item.desc}}</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-3 control-label">物流状态</label>
                    <div class="col-sm-9">
                        <select class="form-control" ng-model="edit.deliveryStatus">
                            <option value="{{item.type}}" ng-repeat="item in sf_type">{{item.desc}}</option>
                        </select>
                    </div>
                </div>
            </form>
        </div>
        <div id="editMailNo" style="display:none;margin:15px;">
            <form class="form-horizontal">
                <div class="form-group">
                    <label class="col-sm-3 control-label">运单号</label>
                    <div class="col-sm-9">
                        <input class="form-control" ng-model="edit.mailNo" maxlength="20">
                    </div>
                </div>
            </form>
        </div>
        <div id="editChannelNo" style="display:none;margin:15px;">
            <form class="form-horizontal">
                <div class="form-group">
                    <label class="col-sm-3 control-label">渠道名称</label>
                    <div class="col-sm-9">
                        <select class="form-control" ng-model="edit.channel" ng-change="showMail(edit.channel)">
                            <option ng-repeat="item in channelList" value="{{item.id}}">{{item.channelName}}</option>
                        </select>
                    </div>
                </div>
                <div id="mailChannelNo" class="form-group">
                    <label class="col-sm-3 control-label">运单号</label>
                    <div class="col-sm-9">
                        <input onkeyup="KeyUpTwoDecimal(this)" type="text" ng-model="edit.channelNo"
                               class="form-control"
                               maxlength="30">
                    </div>
                </div>
            </form>
        </div>
        <div id="editTime" style="display:none;margin:15px;">
            <!-- <form class="form-horizontal">
                <div class="form-group">
                    <label class="col-sm-3 control-label">预约取件</label>
                    <div class="col-sm-9">
                        <input class="form-control" value="{{edit.sendSfUserTime | date : 'yyyy-MM-dd'}}" id="sendTime" readonly>
                    </div>
                </div>
            </form> -->
            <form class="form-horizontal">
                <div class="form-group">
                    <label class="col-sm-4 control-label">预约取件日期</label>
                    <div class="col-sm-8">
                        <select class="form-control" ng-model="edit.sendDate" ng-change="changeTime()">
                            <option value="{{item.day}}" ng-repeat="item in timeList">{{item.day}}</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-4 control-label">时间段</label>
                    <div class="col-sm-8">
                        <select class="form-control" ng-model="edit.sendTime">
                            <option value="{{item}}" ng-repeat="item in timeList2">{{item}}</option>
                        </select>
                    </div>
                </div>
            </form>
        </div>
        <div id="editAddr" style="display:none;margin:15px;">
            <form class="form-inline mb8">
                <div class="form-group">
                    <label class="control-label">姓名</label>
                    <input class="form-control" ng-model="edit.name" maxlength="8">
                </div>
                <div class="form-group">
                    <label class="control-label">联系电话</label>
                    <input class="form-control" ng-model="edit.mobile" maxlength="13" placeholder="如：000(0)-0000000(0)">
                </div>
                <button type="submit" class="btn btn-primary" ng-click="changeUserName()">仅修改联系人</button>
            </form>

            <ul class="nav nav-tabs nav-justified" id="myTab">
                <li class="active"><a href="#userAddr" data-toggle="tab">普通地址</a></li>
                <li><a href="#courtAddr" data-toggle="tab">球场</a></li>
                <li><a href="#bankAddr" data-toggle="tab">银行网点</a></li>
                <li><a href="#sfAddr" data-toggle="tab">顺丰站点</a></li>
                <li><a href="#airAddr" data-toggle="tab">机场网点</a></li>
            </ul>
            <div class="tab-content">
                <div class="tab-pane fade in" id="userAddr">
                    <div class="row" style="margin-top:10px;">
                        <div class="col-sm-12">
                            <table class="table table-bordered table-striped table-hover table-condensed">
                                <thead>
                                <th>联系人</th>
                                <th>手机号</th>
                                <th>省</th>
                                <th>市</th>
                                <th>区</th>
                                <th>详细地址</th>
                                <th>操作</th>
                                </thead>
                                <tbody>
                                <tr style="cursor:pointer" ng-click="checkUserAddr(item)"
                                    ng-repeat="item in userAddrList track by $index">
                                    <td>{{item.contact}}</td>
                                    <td>{{item.mobile}}</td>
                                    <td>{{item.treePath.split(',')[0]}}</td>
                                    <td>{{item.treePath.split(',')[1]}}</td>
                                    <td>{{item.treePath.split(',')[2]}}</td>
                                    <td>{{item.address}}</td>
                                    <td><label class="label label-primary" ng-click="checkUserAddr(item)">选择</label>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                            <pagination page="page" change="getUserAddr(page)"></pagination>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="panel panel-default" style="margin-top:10px;">
                                <div class="panel-heading">
                                    <h3 class="panel-title">编辑地址</h3>
                                </div>
                                <div class="panel-body">
                                    <div class="row">
                                        <div class="col-sm-6 form-group">
                                            <label>联系人</label>
                                            <input type="text" class="form-control" placeholder=""
                                                   ng-model="edit.name_2" maxlength="8">
                                        </div>
                                        <div class="col-sm-6 form-group">
                                            <label>联系电话</label>
                                            <input type="text" class="form-control"
                                                   placeholder="如：13555555555 或 000(0)-0000000(0)"
                                                   ng-model="edit.mobile_2" maxlength="13">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-4 form-group">
                                            <label>省</label>
                                            <select class="form-control" ng-model="edit.province"
                                                    ng-change="getCitieses()">
                                                <option value="">请选择</option>
                                                <option value="{{item.id}}|{{item.fullName}}"
                                                        ng-repeat="item in provinceses">{{item.fullName}}
                                                </option>
                                            </select>
                                        </div>
                                        <div class="col-sm-4 form-group">
                                            <label>市</label>
                                            <select class="form-control" ng-model="edit.city" ng-change="getCounties()">
                                                <option value="">请选择</option>
                                                <option value="{{item.id}}|{{item.fullName}}"
                                                        ng-repeat="item in citieses">{{item.fullName}}
                                                </option>
                                            </select>
                                        </div>
                                        <div class="col-sm-4 form-group">
                                            <label>区</label>
                                            <select class="form-control" ng-model="edit.country">
                                                <option value="">请选择</option>
                                                <option value="{{item.id}}|{{item.fullName}}"
                                                        ng-repeat="item in countieses">{{item.fullName}}
                                                </option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-12 form-group">
                                            <label>详细地址</label>
                                            <input type="text" class="form-control" placeholder=""
                                                   ng-model="edit.address" maxlength="50">
                                        </div>
                                    </div>
                                    <button class="btn btn-primary" ng-click="addUserAddr()">确定</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-pane fade in" id="courtAddr">
                    <div class="row" style="margin-top:10px;">
                        <div class="col-sm-5">
                            <form class="form-horizontal">
                                <div class="form-group">
                                    <label class="col-sm-3 control-label">联系人</label>
                                    <div class="col-sm-9">
                                        <input class="form-control" ng-model="edit.name_1" maxlength="8">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-3 control-label">手机号</label>
                                    <div class="col-sm-9">
                                        <input class="form-control" ng-model="edit.mobile_1" maxlength="11">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-3 control-label">球场</label>
                                    <label class="col-sm-9 control-label">{{edit.stationName1}}</label>
                                </div>
                                <button class="btn btn-primary col-sm-offset-1" ng-click="checkStation(1)">确定</button>
                            </form>
                        </div>
                        <div class="col-sm-5">
                            <div class="form-group">
                                <input class="form-control" ng-model="filterCourt" placeholder="搜索..">
                                <div class="list-group" style="max-height:250px;overflow:auto;">
                                    <a href="javascript:;" class="list-group-item"
                                       ng-repeat="item in courtList | filter:{name : filterCourt} track by $index"
                                       ng-click="checkItem(item,1)">{{item.name}}</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-pane fade in" id="bankAddr">
                    <div class="row" style="margin-top:10px;">
                        <div class="col-sm-5">
                            <form class="form-horizontal">
                                <div class="form-group">
                                    <label class="col-sm-3 control-label">联系人</label>
                                    <div class="col-sm-9">
                                        <input class="form-control" ng-model="edit.name_1" maxlength="8">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-3 control-label">手机号</label>
                                    <div class="col-sm-9">
                                        <input class="form-control" ng-model="edit.mobile_1" maxlength="11">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-3 control-label">银行网点</label>
                                    <label class="col-sm-9 control-label">{{edit.stationName3}}</label>
                                </div>
                                <button class="btn btn-primary col-sm-offset-1" ng-click="checkStation(3)">确定</button>
                            </form>
                        </div>
                        <div class="col-sm-5">
                            <div class="form-group">
                                <input class="form-control" ng-model="filterBank" placeholder="搜索..">
                                <div class="list-group" style="max-height:250px;overflow:auto;">
                                    <a href="javascript:;" class="list-group-item"
                                       ng-repeat="item in bankList | filter:{name : filterBank} track by $index"
                                       ng-click="checkItem(item,3)">{{item.name}}</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-pane fade in" id="sfAddr">
                    <div class="row" style="margin-top:10px;">
                        <div class="col-sm-5">
                            <form class="form-horizontal">
                                <div class="form-group">
                                    <label class="col-sm-3 control-label">联系人</label>
                                    <div class="col-sm-9">
                                        <input class="form-control" ng-model="edit.name_1" maxlength="8">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-3 control-label">手机号</label>
                                    <div class="col-sm-9">
                                        <input class="form-control" ng-model="edit.mobile_1" maxlength="11">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-3 control-label">顺丰站点</label>
                                    <label class="col-sm-9 control-label">{{edit.stationName5}}</label>
                                </div>
                                <button class="btn btn-primary col-sm-offset-1" ng-click="checkStation(5)">确定</button>
                            </form>
                        </div>
                        <div class="col-sm-5">
                            <div class="form-group">
                                <input class="form-control" ng-model="filterSf" placeholder="搜索..">
                                <div class="list-group" style="max-height:250px;overflow:auto;">
                                    <a href="javascript:;" class="list-group-item"
                                       ng-repeat="item in sfList | filter:{name : filterSf} track by $index"
                                       ng-click="checkItem(item,5)">{{item.name}}</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-pane fade in" id="airAddr">
                    <div class="row" style="margin-top:10px;">
                        <div class="col-sm-5">
                            <form class="form-horizontal">
                                <div class="form-group">
                                    <label class="col-sm-3 control-label">联系人</label>
                                    <div class="col-sm-9">
                                        <input class="form-control" ng-model="edit.name_1" maxlength="8">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-3 control-label">手机号</label>
                                    <div class="col-sm-9">
                                        <input class="form-control" ng-model="edit.mobile_1" maxlength="11">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-3 control-label">机场网点</label>
                                    <label class="col-sm-9 control-label">{{edit.stationName2}}</label>
                                </div>
                                <button class="btn btn-primary col-sm-offset-1" ng-click="checkStation(2)">确定</button>
                            </form>
                        </div>
                        <div class="col-sm-5">
                            <div class="form-group">
                                <input class="form-control" ng-model="filterAir" placeholder="搜索..">
                                <div class="list-group" style="max-height:250px;overflow:auto;">
                                    <a href="javascript:;" class="list-group-item"
                                       ng-repeat="item in airList | filter:{name : filterAir} track by $index"
                                       ng-click="checkItem(item,2)">{{item.name}}</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="moneyCancel" class="form-inline dashboard-mark" style="display:none">
        <div class="form-goup">
            <label class="qbt1-font7">预约取件: </label>
            <label>{{order.sendSfUserTime | date : 'yyyy-MM-dd HH:mm:ss'}}</label>
        </div>
        <div class="form-goup">
            <label class="qbt1-font7">退款总金额：</label>
            <label>{{totalAmount | currency : '￥'}}</label>
        </div>
        <div class="form-goup">
            <label class="qbt1-font7">保价金额：</label>
            <label>{{order.insuredValue | currency : '￥'}}万</label>
        </div>
        <div class="form-goup">
            <label class="qbt1-font7">保价费：</label>
            <label>{{order.insuredFee | currency : '￥'}}</label>
        </div>
        <div class="form-goup">
            <label class="qbt1-font7">实际退款金额：</label>
            ￥<input style="width:80px;" ng-change="changeRefundAmount()" type="number" class="form-control"
                    ng-model="refundAmount" min="0">
            <label style="color:red">{{refundAmountMsg}}</label>
        </div>
        <div class="form-goup">
            <label class="qbt1-font7">扣取金额：</label>
            ￥<input style="width:80px;" ng-change="changeFeeAmount()" type="number" class="form-control"
                    ng-model="feeAmount"
                    min="0">
            <label style="color:red">{{feeAmountMsg}}</label>
        </div>
        <div class="form-goup">
            <label class="qbt1-font7">扣费原因：</label>
            <select ng-model="moneyMsg" class="form-control">
                <option value="">请选择</option>
                <option value="即日正常取消">即日正常取消</option>
                <option value="即日已过扫码枪取消">即日已过扫码枪取消</option>
                <option value="问题件取消">问题件取消</option>
            </select>
        </div>
        <div class="form-goup">
            <label style="color:red;margin-top:5px">提示：{{tipMsg}}</label>
        </div>
    </div>
    <script src="/assets/jquery/dist/jquery.min.js"></script>
    <script src="/assets/jquery.nicescroll/jquery.nicescroll.min.js"></script>
    <script src="/assets/angular/angular.min.js"></script>
    <script src="/assets/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="/assets/bootstrap-datetimepicker/js/bootstrap-datetimepicker.min.js"></script>
    <script src="/assets/layer/layer.js"></script>
    <script src="{{{/js/app.js}}}"></script>
    <script src="{{{/js/orderDetail.js}}}"></script>
</body>
</html>
